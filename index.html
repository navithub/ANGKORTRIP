<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>·ûè·û∂·ûö·û∂·ûÑ·ûî·ûÑ·üí·ûö·üÄ·ûì</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Battambang:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Base Styles for Body */
        body {
            font-family: 'Battambang', system-ui, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh; /* Allow scrolling */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; /* Align content to start for scrolling */
            transition: background-color 1s ease-in-out; 
        }

        /* --- 1. Rainbow Animated Background (ALL BG) --- */
        .rainbow-bg {
            background: linear-gradient(120deg, #ff0000, #ff8000, #ffff00, #00ff00, #00ffff, #0000ff, #9400d3, #ff0000);
            background-size: 500% 500%;
            animation: gradient-animation 25s ease infinite;
        }
        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- 2. Creator Text Animation (Shimmering Glow) --- */
        @keyframes shimmer-glow {
            0% { text-shadow: 0 0 5px #fff, 0 0 10px #ff00ff; transform: translateY(0) scale(1); }
            50% { text-shadow: 0 0 15px #ff0, 0 0 25px #ff00ff, 0 0 40px #ff0; transform: translateY(-3px) scale(1.02); }
            100% { text-shadow: 0 0 5px #fff, 0 0 10px #ff00ff; transform: translateY(0) scale(1); }
        }
        #creator-text {
            animation: shimmer-glow 2.5s infinite alternate;
            display: inline-block;
            color: #fff; 
            /* Ensure text stands out on the rainbow background */
            text-shadow: 2px 2px 5px rgba(0,0,0,0.8);
        }

        /* Live Date/Time Pulse Glow Animation */
        @keyframes pulse-glow {
            0%, 100% { text-shadow: 0 0 5px rgba(255, 255, 255, 0.7), 0 0 10px rgba(255, 100, 100, 0.5); }
            50% { text-shadow: 0 0 15px rgba(255, 255, 255, 1), 0 0 25px rgba(255, 100, 100, 0.8); }
        }
        .live-text {
            animation: pulse-glow 3s infinite alternate;
        }

        /* Card Entrance Animation */
        @keyframes bounce-in {
            0% { transform: scale(0.8) translateY(-50px); opacity: 0; }
            50% { transform: scale(1.05) translateY(10px); opacity: 1; }
            100% { transform: scale(1) translateY(0); }
        }
        .card-enter {
            animation: bounce-in 0.8s ease-out both;
        }

        /* Schedule Transition Animation (Fade Out/In) */
        .fade-out { opacity: 0; transition: opacity 0.3s ease-out; }
        .fade-in { opacity: 1; transition: opacity 0.5s ease-in; }

        /* Subject Item Animation */
        @keyframes slide-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .subject-item {
            animation: slide-up 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
        }
        
        /* --- Welcome Screen Animation --- */
        @keyframes welcome-pop {
            0% { opacity: 0; transform: scale(0.5) rotate(-5deg); }
            50% { opacity: 1; transform: scale(1.1) rotate(5deg); }
            100% { opacity: 1; transform: scale(1) rotate(0); }
        }
        .welcome-active {
            animation: welcome-pop 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
        }
        
    </style>
</head>
<body class="rainbow-bg">

    <!-- Welcome Overlay -->
    <div id="welcome-overlay" class="fixed inset-0 z-50 flex items-center justify-center bg-black/90 transition-opacity duration-1000 ease-in-out">
        <div id="welcome-text" class="text-5xl md:text-7xl font-black text-yellow-400 opacity-0" style="text-shadow: 0 0 10px rgba(255, 255, 0, 0.8);">
            ·ûÅ·üÜ·ûö·üÄ·ûì·ûé·û∂·ûÄ·üí·ûò·üÅ·ûÑ·ûè·ûº·ûÖü•≥
        </div>
    </div>

    <!-- Main Content Wrapper -->
    <div class="w-full max-w-4xl p-4 md:p-8 pt-10">

        <!-- Schedule Card -->
        <div id="schedule-container" class="card-enter w-full bg-white/90 backdrop-blur-sm shadow-2xl rounded-3xl p-6 md:p-10 text-center border-4 border-white/70">

            <!-- Website Title -->
            <h1 class="text-4xl md:text-6xl font-black mb-4 text-red-600 live-text tracking-wide" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.1);">
                ·ûè·û∂·ûö·û∂·ûÑ·ûî·ûÑ·üí·ûö·üÄ·ûì
            </h1>
            
            <!-- Live Date and Time -->
            <div class="mb-8 text-lg md:text-xl font-bold text-gray-800 live-text">
                
                <!-- Day Cycling Controls -->
                <div class="flex items-center justify-center space-x-4">
                    
                    <!-- NEW: Home Button to revert to current day -->
                    <button id="home-btn" class="text-3xl font-extrabold text-red-600 hover:text-red-900 transition duration-300 transform hover:scale-125 focus:outline-none" title="·ûè·üí·ûö·û°·ûî·üã·ûë·üÖ·ûê·üí·ûÑ·üÉ·ûñ·û∑·ûè·ûî·üí·ûö·û∂·ûÄ·ûä">
                        üè† <!-- Home Icon Emoji -->
                    </button>

                    <button id="prev-day-btn" class="text-3xl font-extrabold text-blue-500 hover:text-blue-700 transition duration-300 transform hover:scale-125 focus:outline-none">
                        &#x25C0; <!-- Left Arrow -->
                    </button>
                    <span id="khmer-day" class="text-3xl md:text-4xl font-extrabold text-blue-700 block mb-1">...</span>
                    <button id="next-day-btn" class="text-3xl font-extrabold text-blue-500 hover:text-blue-700 transition duration-300 transform hover:scale-125 focus:outline-none">
                        &#x25B6; <!-- Right Arrow -->
                    </button>
                </div>

                <span id="live-date">...</span> | <span id="live-time">...</span>
            </div>

            <!-- Schedule Title -->
            <h2 class="text-2xl md:text-3xl font-bold text-green-600 mb-6 border-b-2 pb-2 border-green-300">
                <span class="live-text">TODAY HAVE</span>
            </h2>

            <!-- Schedule List -->
            <div id="schedule-list" class="grid gap-4 text-left">
                <div class="text-gray-500">·ûÄ·üÜ·ûñ·ûª·ûÑ·ûï·üí·ûë·ûª·ûÄ·ûè·û∂·ûö·û∂·ûÑ...</div>
            </div>
            
            <!-- Spacer -->
            <div class="h-20"></div> 

        </div>

        <!-- Creator & Bio Section (Always visible, styled for Rainbow BG) -->
        <div id="creator-bio-section" class="w-full py-8 mt-4 text-center">
            
            <div id="creator-text-container" class="mb-4 text-center">
                <span id="creator-text" class="text-xl md:text-3xl font-black tracking-widest transition-colors duration-500">
                    Creator by VID+KDOAüê≠
                </span>
            </div>

            <div id="bio-text" class="w-full max-w-2xl mx-auto p-6 rounded-2xl shadow-2xl bg-black/70 text-white/90">
                <p class="text-lg md:text-xl font-bold tracking-wide">
                    Thank For Using My Website I Just Show My IQ And This is For G7B2 Only
                </p>
            </div>
        </div>

    </div>

    <script>
        // --- Utility Functions ---

        // Global utility to safely handle element class manipulation for transitions
        function applyTransition(element, contentCallback) {
            if (!element) return;
            element.classList.add('fade-out');

            setTimeout(() => {
                contentCallback();
                element.classList.remove('fade-out');
                element.classList.add('fade-in');
            }, 300);

            setTimeout(() => {
                element.classList.remove('fade-in');
            }, 800);
        }

        // --- Data and State ---

        // Key: Day of the week (0=Sunday, 1=Monday, ..., 6=Saturday)
        const SCHEDULE_DATA = {
            1: { dayKh: "·ûê·üí·ûÑ·üÉ·ûÖ·ûì·üí·ûë", classes: [{ subject: "·û¢·ûÑ·üã·ûÇ·üí·ûõ·üÅ·ûü", time: "13:00 > 14:00" }, { subject: "·ûî·üí·ûö·ûú·ûè·üí·ûè·û∑·ûú·û∑·ûë·üí·ûô·û∂", time: "14:00 > 15:00" }, { subject: "·ûÇ·ûé·û∑·ûè·ûú·û∑·ûë·üí·ûô·û∂", time: "15:00 > 17:00" }] },
            2: { dayKh: "·ûê·üí·ûÑ·üÉ·û¢·ûÑ·üí·ûÇ·û∂·ûö", classes: [{ subject: "·ûó·û∂·ûü·û∂·ûÅ·üí·ûò·üÇ·ûö", time: "13:00 > 14:00" }, { subject: "·û¢·ûÑ·üã·ûÇ·üí·ûõ·üÅ·ûü", time: "14:00 > 15:00" }, { subject: "·ûï·üÇ·ûì·ûä·û∏·ûú·û∑·ûë·üí·ûô·û∂", time: "15:00 > 16:00" }, { subject: "·ûó·ûº·ûò·û∑·ûú·û∑·ûë·üí·ûô·û∂", time: "16:00 > 17:00" }] },
            3: { dayKh: "·ûê·üí·ûÑ·üÉ·ûñ·ûª·ûí", classes: [{ subject: "·ûÇ·ûé·û∑·ûè·ûú·û∑·ûë·üí·ûô·û∂", time: "13:00 > 15:00" }, { subject: "·ûÇ·û∏·ûò·û∏·ûú·û∑·ûë·üí·ûô·û∂", time: "15:00 > 16:00" }, { subject: "·ûá·û∏·ûú·ûú·û∑·ûë·üí·ûô·û∂", time: "16:00 > 17:00" }] },
            4: { dayKh: "·ûê·üí·ûÑ·üÉ·ûñ·üí·ûö·û†·ûü·üí·ûî·ûè·û∑·üç", classes: [{ subject: "·ûó·û∂·ûü·û∂·ûÅ·üí·ûò·üÇ·ûö", time: "13:00 > 15:00" }, { subject: "·ûó·ûº·ûò·û∑·ûú·û∑·ûë·üí·ûô·û∂", time: "15:00 > 16:00" }, { subject: "·ûá·û∏·ûú·ûú·û∑·ûë·üí·ûô·û∂", time: "16:00 > 17:00" }] },
            5: { dayKh: "·ûê·üí·ûÑ·üÉ·ûü·ûª·ûÄ·üí·ûö", classes: [{ subject: "·ûó·û∂·ûü·û∂·ûÅ·üí·ûò·üÇ·ûö", time: "13:00 > 15:00" }, { subject: "·ûü·û∏·ûõ·ûí·ûò·üå ·ûñ·ûõ·ûö·ûä·üí·ûã", time: "15:00 > 16:00" }, { subject: "·ûö·ûº·ûî·ûú·û∑·ûë·üí·ûô·û∂", time: "16:00 > 17:00" }] },
            6: { dayKh: "·ûê·üí·ûÑ·üÉ·ûü·üÖ·ûö·üç", classes: [{ subject: "·ûó·ûº·ûò·û∑·ûú·û∑·ûë·üí·ûô·û∂", time: "13:00 > 14:00" }, { subject: "·ûÇ·ûé·û∑·ûè·ûú·û∑·ûë·üí·ûô·û∂", time: "14:00 > 16:00" }] },
            0: { dayKh: "·ûê·üí·ûÑ·üÉ·û¢·û∂·ûë·û∑·ûè·üí·ûô", classes: [{ subject: "·ûö·û∏·ûÄ·ûö·û∂·ûô·ûê·üí·ûÑ·üÉ·ûà·ûî·üã·ûü·ûò·üí·ûö·û∂·ûÄ!", time: "·ûñ·üÅ·ûâ·ûò·ûΩ·ûô·ûê·üí·ûÑ·üÉ" }] }
        };

        const khmerDayEl = document.getElementById('khmer-day');
        const liveDateEl = document.getElementById('live-date');
        const liveTimeEl = document.getElementById('live-time');
        const scheduleListEl = document.getElementById('schedule-list');
        const nextDayBtn = document.getElementById('next-day-btn');
        const prevDayBtn = document.getElementById('prev-day-btn');
        const homeBtn = document.getElementById('home-btn'); // New element
        const creatorTextEl = document.getElementById('creator-text');
        const creatorContainerEl = document.getElementById('creator-text-container');

        let realDayIndex = null;
        let displayDayIndex = null; // Day currently being displayed (can be overriden)
        let overrideTimer = null;


        // --- Schedule Rendering Logic ---

        /**
         * Renders the schedule list HTML with individual item animations.
         */
        function renderScheduleList(classes, animate = true) {
            scheduleListEl.innerHTML = '';
            
            classes.forEach((item, index) => {
                const subjectEl = document.createElement('div');
                subjectEl.className = 'bg-gray-100 p-4 rounded-xl shadow-lg flex justify-between items-center text-gray-800 border-l-8 border-yellow-500 hover:shadow-xl transition duration-300 transform hover:scale-[1.01]';
                
                if (animate) {
                    // Apply staggered entrance animation
                    subjectEl.classList.add('subject-item');
                    subjectEl.style.animationDelay = `${index * 0.1}s`;
                }

                const subjectText = document.createElement('span');
                subjectText.className = 'text-xl md:text-2xl font-bold';
                subjectText.textContent = item.subject;

                const timeText = document.createElement('span');
                timeText.className = 'text-sm md:text-lg font-medium text-red-500 bg-yellow-100 px-3 py-1 rounded-full shadow-inner';
                timeText.textContent = item.time;
                
                subjectEl.appendChild(subjectText);
                subjectEl.appendChild(timeText);
                scheduleListEl.appendChild(subjectEl);
            });
        }
        
        /**
         * Renders the schedule UI based on a specific day index.
         */
        function renderSchedule(dayIndex, animate = true) {
            const todaySchedule = SCHEDULE_DATA[dayIndex];
            
            // Update Khmer Day text
            if (animate) {
                applyTransition(khmerDayEl, () => {
                    khmerDayEl.textContent = todaySchedule.dayKh;
                });
                
                // Render classes list
                applyTransition(scheduleListEl, () => {
                    renderScheduleList(todaySchedule.classes, true);
                });
            } else {
                // No transition, simple update
                khmerDayEl.textContent = todaySchedule.dayKh;
                renderScheduleList(todaySchedule.classes, false);
            }
        }

        /**
         * Fetches the current time in Cambodia (Asia/Phnom_Penh) and updates the UI.
         */
        function updateLiveTimeAndDay() {
            const now = new Date();
            const timeZone = 'Asia/Phnom_Penh';

            const optionsDate = { year: 'numeric', month: 'long', day: 'numeric', timeZone: timeZone };
            const optionsTime = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false, timeZone: timeZone };

            const fullDate = new Intl.DateTimeFormat('km-KH', optionsDate).format(now);
            const liveTime = new Intl.DateTimeFormat('en-US', optionsTime).format(now);
            
            const newRealDayIndex = now.getDay(); // 0=Sun, 1=Mon, ..., 6=Sat

            // 1. Check if the real day has changed (and clear override if so)
            if (realDayIndex === null || realDayIndex !== newRealDayIndex) {
                realDayIndex = newRealDayIndex;
                
                // Clear any manual override, as the actual day has changed
                clearTimeout(overrideTimer);
                // Only reset if displayDayIndex was never set (first load) or if it was currently showing the old real day
                if (displayDayIndex === null || displayDayIndex === newRealDayIndex) {
                    displayDayIndex = realDayIndex;
                    renderSchedule(displayDayIndex, true); // Render new real day with animation
                }
            }

            // 2. Initialize displayDayIndex on first run
            if (displayDayIndex === null) {
                displayDayIndex = realDayIndex;
                renderSchedule(displayDayIndex, false); // Initial render without animation
            }
            
            // 3. Update Live Time and Date (Always update)
            liveDateEl.textContent = fullDate.trim(); 
            liveTimeEl.textContent = liveTime;
            
            // 4. Update the displayed day name (in case only time updates)
            khmerDayEl.textContent = SCHEDULE_DATA[displayDayIndex].dayKh;
        }

        // --- Day Cycling Logic ---

        function cycleDay(direction) {
            
            // If the current display is the real day, start the override from the real day
            if (overrideTimer === null || displayDayIndex === realDayIndex) {
                displayDayIndex = realDayIndex;
            }

            // Clear existing timer to extend the override period
            clearTimeout(overrideTimer);

            let nextIndex = displayDayIndex + direction;

            // Handle wrap around (0-6)
            if (nextIndex > 6) nextIndex = 0;
            if (nextIndex < 0) nextIndex = 6;

            displayDayIndex = nextIndex;
            
            // Force UI update
            renderSchedule(displayDayIndex, true); // Render with animation

            // Set 20 second timeout to revert to real day
            overrideTimer = setTimeout(() => {
                displayDayIndex = realDayIndex; // Revert
                renderSchedule(realDayIndex, true); // Re-render real day with animation
                overrideTimer = null;
            }, 20000); // 20 seconds
        }

        // --- Home Button Logic ---
        function goToRealDay() {
            if (overrideTimer) {
                clearTimeout(overrideTimer);
                overrideTimer = null;
            }
            if (displayDayIndex !== realDayIndex) {
                displayDayIndex = realDayIndex; // Revert
                renderSchedule(realDayIndex, true); // Re-render real day with animation
            }
        }

        // --- Welcome Screen Logic ---

        function initializeWelcome() {
            const overlay = document.getElementById('welcome-overlay');
            const text = document.getElementById('welcome-text');

            // Show text with animation
            text.classList.add('welcome-active');

            setTimeout(() => {
                // Fade out overlay after 3 seconds
                overlay.style.opacity = '0';
                
                // Remove overlay from DOM after fade-out
                setTimeout(() => {
                    overlay.remove();
                }, 1000); // Duration of opacity transition
            }, 3000); 
        }

        // --- Initialization ---

        document.addEventListener('DOMContentLoaded', () => {
            // Setup day cycling buttons
            nextDayBtn.addEventListener('click', () => cycleDay(1)); // +1 day
            prevDayBtn.addEventListener('click', () => cycleDay(-1)); // -1 day
            
            // Setup Home button
            homeBtn.addEventListener('click', goToRealDay);

            // Run initial update and set interval
            updateLiveTimeAndDay();
            setInterval(updateLiveTimeAndDay, 1000); 
            
            // Show welcome message
            initializeWelcome();
        });

    </script>

</body>
</html>
